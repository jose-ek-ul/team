(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{2961:function(e,t,n){"use strict";var s=n(4836);t.Z=void 0;var a=s(n(4938)),r=n(5893),i=(0,a.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=i},2450:function(e,t,n){"use strict";var s=n(4836);t.Z=void 0;var a=s(n(4938)),r=n(5893),i=(0,a.default)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.Z=i},7109:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var s,a=n(3366),r=n(7462),i=n(7294),o=n(6010),l=n(4780),d=n(8216),c=n(5861),u=n(7167),h=n(4423),p=n(948),w=n(1588),g=n(4867);function getInputAdornmentUtilityClass(e){return(0,g.Z)("MuiInputAdornment",e)}let m=(0,w.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var x=n(1657),v=n(5893);let f=["children","className","component","disablePointerEvents","disableTypography","position","variant"],useUtilityClasses=e=>{let{classes:t,disablePointerEvents:n,hiddenLabel:s,position:a,size:r,variant:i}=e,o={root:["root",n&&"disablePointerEvents",a&&`position${(0,d.Z)(a)}`,i,s&&"hiddenLabel",r&&`size${(0,d.Z)(r)}`]};return(0,l.Z)(o,getInputAdornmentUtilityClass,t)},Z=(0,p.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`position${(0,d.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(({theme:e,ownerState:t})=>(0,r.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${m.positionStart}&:not(.${m.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})),j=i.forwardRef(function(e,t){let n=(0,x.Z)({props:e,name:"MuiInputAdornment"}),{children:l,className:d,component:p="div",disablePointerEvents:w=!1,disableTypography:g=!1,position:m,variant:j}=n,P=(0,a.Z)(n,f),C=(0,h.Z)()||{},b=j;j&&C.variant,C&&!b&&(b=C.variant);let y=(0,r.Z)({},n,{hiddenLabel:C.hiddenLabel,size:C.size,disablePointerEvents:w,position:m,variant:b}),S=useUtilityClasses(y);return(0,v.jsx)(u.Z.Provider,{value:null,children:(0,v.jsx)(Z,(0,r.Z)({as:p,ownerState:y,className:(0,o.Z)(S.root,d),ref:t},P,{children:"string"!=typeof l||g?(0,v.jsxs)(i.Fragment,{children:["start"===m?s||(s=(0,v.jsx)("span",{className:"notranslate",children:"â€‹"})):null,l]}):(0,v.jsx)(c.Z,{color:"text.secondary",children:l})}))})});var P=j},3124:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/password",function(){return n(1604)}])},3114:function(e,t){"use strict";t.Z="https://ulmxteam.azurewebsites.net/api"},1604:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ChangePassword}});var s=n(5893),a=n(7294),r=n(6886),i=n(5861),o=n(1903),l=n(5582),d=n(6720),c=n(7357),u=n(3321),h=n(7109),p=n(3946),w=n(2961),g=n(2450),m=n(8767),x=n(3114),v=n(1163),f=n(5885),Z=n(8703),j=n(1737);function ChangePassword(){let e=(0,v.useRouter)(),t=new f.Z,[n,P]=a.useState(!1),[C,b]=a.useState(""),[y,S]=a.useState("warning"),handleClose=(e,t)=>{"clickaway"!==t&&P(!1)},A=t.get("id"),[M,z]=(0,a.useState)(""),[E,_]=(0,a.useState)(""),[k,I]=(0,a.useState)(""),[D,N]=a.useState(!1),[O,L]=a.useState(!1),[T,U]=a.useState(!1),handleMouseDownPassword=e=>{e.preventDefault()},fetchUsers=async()=>{let n={mode:"cors",headers:{Authorization:"Bearer ".concat(t.get("access_token")),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}},s=await fetch("".concat(x.Z,"/Auth/IsLogged/"),n);if(200==s.status)return s.json();throw 401==s.status&&(t.remove("id",{path:"/"}),t.remove("access_token",{path:"/"}),t.remove("image",{path:"/"}),e.push("/signin")),Error("".concat(s.status))},{isLoading:R,isError:W,data:F,error:$}=(0,m.useQuery)("users",fetchUsers,{refetchOnWindowFocus:!1});if($)return e.push("/error"),(0,s.jsx)(s.Fragment,{});if(R)return(0,s.jsx)("span",{children:"Loading..."});let handleChangePassword=async e=>{e.preventDefault();let n={Id:A?A.toString():"",OldPassword:M,NewPassword:E,ConfirmPassword:k},s={method:"POST",headers:{Authorization:"Bearer ".concat(t.get("access_token")),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(x.Z,"/Auth/ChangePsw"),s).then(e=>e.ok?e.json():e.text().then(e=>{throw Error(e)})).then(e=>{S("success"),b("Changes saved successfully"),P(!0)}).catch(e=>{S("warning"),b(e.toString()),P(!0)})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{component:"main",maxWidth:"xs",children:[(0,s.jsx)(d.ZP,{}),(0,s.jsx)(c.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(i.Z,{variant:"h6",gutterBottom:!0,children:"Change Password"}),(0,s.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(o.Z,{id:"old-password",name:"old-password",label:"Old Password",fullWidth:!0,type:D?"text":"password",value:M,variant:"standard",InputProps:{endAdornment:(0,s.jsxs)(h.Z,{position:"end",children:[" ",(0,s.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>N(e=>!e),onMouseDown:handleMouseDownPassword,edge:"end",children:D?(0,s.jsx)(g.Z,{}):(0,s.jsx)(w.Z,{})})]})},onChange:e=>{z(e.target.value)}})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(o.Z,{id:"new-password",name:"new-password",label:"New Password",fullWidth:!0,type:O?"text":"password",value:E,variant:"standard",InputProps:{endAdornment:(0,s.jsxs)(h.Z,{position:"end",children:[" ",(0,s.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>L(e=>!e),onMouseDown:handleMouseDownPassword,edge:"end",children:O?(0,s.jsx)(g.Z,{}):(0,s.jsx)(w.Z,{})})]})},helperText:"*Requires an uppercase character, lowercase character, a digit, a non-alphanumeric character and least five characters long",onChange:e=>{_(e.target.value)}})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsx)(o.Z,{id:"confirm-password",name:"confirm-password",label:"Confirm Password",value:k,fullWidth:!0,type:T?"text":"password",variant:"standard",InputProps:{endAdornment:(0,s.jsxs)(h.Z,{position:"end",children:[" ",(0,s.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>U(e=>!e),onMouseDown:handleMouseDownPassword,edge:"end",children:T?(0,s.jsx)(g.Z,{}):(0,s.jsx)(w.Z,{})})]})},onChange:e=>{I(e.target.value)}})})]}),(0,s.jsx)(u.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:handleChangePassword,children:"Update"})]})})]}),(0,s.jsx)(Z.Z,{open:n,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:6e3,onClose:handleClose,children:(0,s.jsx)(j.Z,{onClose:handleClose,severity:y,sx:{width:"100%"},children:C})})]})}}},function(e){e.O(0,[977,903,369,774,888,179],function(){return e(e.s=3124)}),_N_E=e.O()}]);