(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{2961:function(e,s,n){"use strict";var t=n(4836);s.Z=void 0;var a=t(n(4938)),r=n(5893),o=(0,a.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");s.Z=o},2450:function(e,s,n){"use strict";var t=n(4836);s.Z=void 0;var a=t(n(4938)),r=n(5893),o=(0,a.default)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");s.Z=o},3124:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/password",function(){return n(1604)}])},3114:function(e,s){"use strict";s.Z="https://ulmxteam.azurewebsites.net/api"},1604:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return ChangePassword}});var t=n(5893),a=n(7294),r=n(6886),o=n(5861),i=n(1903),d=n(5582),l=n(6720),c=n(7357),u=n(3321),h=n(7109),p=n(3946),w=n(2961),g=n(2450),x=n(8767),f=n(3114),m=n(1163),j=n(5885),Z=n(8703),v=n(1737);function ChangePassword(){let e=(0,m.useRouter)(),s=new j.Z,[n,C]=a.useState(!1),[P,y]=a.useState(""),[b,_]=a.useState("warning"),handleClose=(e,s)=>{"clickaway"!==s&&C(!1)},k=s.get("id"),[S,M]=(0,a.useState)(""),[z,A]=(0,a.useState)(""),[D,O]=(0,a.useState)(""),[N,E]=a.useState(!1),[T,I]=a.useState(!1),[W,F]=a.useState(!1),handleMouseDownPassword=e=>{e.preventDefault()},fetchUsers=async()=>{let n={mode:"cors",headers:{Authorization:"Bearer ".concat(s.get("access_token")),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}},t=await fetch("".concat(f.Z,"/Auth/IsLogged/"),n);if(200==t.status)return t.json();throw 401==t.status&&(s.remove("id",{path:"/"}),s.remove("access_token",{path:"/"}),s.remove("image",{path:"/"}),e.push("/signin")),Error("".concat(t.status))},{isLoading:B,isError:L,data:U,error:R}=(0,x.useQuery)("users",fetchUsers,{refetchOnWindowFocus:!1});if(R)return e.push("/error"),(0,t.jsx)(t.Fragment,{});if(B)return(0,t.jsx)("span",{children:"Loading..."});let handleChangePassword=async e=>{e.preventDefault();let n={Id:k?k.toString():"",OldPassword:S,NewPassword:z,ConfirmPassword:D},t={method:"POST",headers:{Authorization:"Bearer ".concat(s.get("access_token")),"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat(f.Z,"/Auth/ChangePsw"),t).then(e=>e.ok?e.json():e.text().then(e=>{throw Error(e)})).then(e=>{_("success"),y("Changes saved successfully"),C(!0)}).catch(e=>{_("warning"),y(e.toString()),C(!0)})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Z,{component:"main",maxWidth:"xs",children:[(0,t.jsx)(l.ZP,{}),(0,t.jsx)(c.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(o.Z,{variant:"h6",gutterBottom:!0,children:"Change Password"}),(0,t.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(i.Z,{id:"old-password",name:"old-password",label:"Old Password",fullWidth:!0,type:N?"text":"password",value:S,variant:"standard",InputProps:{endAdornment:(0,t.jsxs)(h.Z,{position:"end",children:[" ",(0,t.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>E(e=>!e),onMouseDown:handleMouseDownPassword,edge:"end",children:N?(0,t.jsx)(g.Z,{}):(0,t.jsx)(w.Z,{})})]})},onChange:e=>{M(e.target.value)}})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(i.Z,{id:"new-password",name:"new-password",label:"New Password",fullWidth:!0,type:T?"text":"password",value:z,variant:"standard",InputProps:{endAdornment:(0,t.jsxs)(h.Z,{position:"end",children:[" ",(0,t.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>I(e=>!e),onMouseDown:handleMouseDownPassword,edge:"end",children:T?(0,t.jsx)(g.Z,{}):(0,t.jsx)(w.Z,{})})]})},helperText:"*Requires an uppercase character, lowercase character, a digit, a non-alphanumeric character and least five characters long",onChange:e=>{A(e.target.value)}})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(i.Z,{id:"confirm-password",name:"confirm-password",label:"Confirm Password",value:D,fullWidth:!0,type:W?"text":"password",variant:"standard",InputProps:{endAdornment:(0,t.jsxs)(h.Z,{position:"end",children:[" ",(0,t.jsx)(p.Z,{"aria-label":"toggle password visibility",onClick:()=>F(e=>!e),onMouseDown:handleMouseDownPassword,edge:"end",children:W?(0,t.jsx)(g.Z,{}):(0,t.jsx)(w.Z,{})})]})},onChange:e=>{O(e.target.value)}})})]}),(0,t.jsx)(u.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:handleChangePassword,children:"Update"})]})})]}),(0,t.jsx)(Z.Z,{open:n,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:6e3,onClose:handleClose,children:(0,t.jsx)(v.Z,{onClose:handleClose,severity:b,sx:{width:"100%"},children:P})})]})}}},function(e){e.O(0,[977,190,369,774,888,179],function(){return e(e.s=3124)}),_N_E=e.O()}]);